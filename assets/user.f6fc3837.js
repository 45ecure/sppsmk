import{r as w,l as V,o as y,a as f,c as b,d as l,w as n,_ as u,m as h,F as U,b as t,h as m,n as r,k as N,i as p,v as c,j as S,p as C,q as v,t as E,s as M,e as i}from"./index.7cbdcbda.js";import{_ as $}from"./Table.d38c6265.js";const j=t("div",{class:"mb-4 pb-2 border-b text-xl"},"Data User",-1),O={class:"form-field"},J={class:"bg-white rounded inline-block px-1"},T=["onClick"],B=["onClick"],D=t("label",{for:""},"Username",-1),P=t("label",{for:""},"Password",-1),R={key:0,class:"hint mb-3"},F=t("label",{for:""},"Nama",-1),H=t("label",{for:""},"Role",-1),A=t("option",{value:""},"Pilih Role",-1),K=t("option",{value:"1"},"superadmin",-1),z=t("option",{value:"2"},"administrator",-1),G=[A,K,z],I=t("div",{class:"text-right mt-5"},[t("button",{type:"submit"},"Simpan")],-1),L=["onSubmit"],Q=t("div",{class:"mt-5 text-right"},[t("button",{class:"!bg-red-500",type:"submit"},"Hapus")],-1),Z={__name:"user",setup(W){const e=w({isEdit:!1,modal:{save:!1,delete:!1},data:{items:[],totalCount:0},req:{id:"",username:"",password:"",nama:"",role:""}}),g=V(()=>({username:i.string().min(3).required(),password:e.req.id?i.string().optional():i.string().min(8).required(),nama:i.string().required(),role:i.string().required()}));function _(){e.req={id:"",username:"",password:"",nama:"",role:""}}function d(){_(),m.get("/user",e.filter).then(s=>s.json()).then(s=>{e.data.items=s}).catch(s=>{r(s,"bg-red-400")})}function q(){e.isEdit?m.put("/user/"+e.req.id,e.req).then(s=>s.json()).then(s=>{e.modal.save=!1,r("data berhasil diedit"),d()}).catch(s=>{r(s,"bg-red-400")}):m.post("/user",e.req).then(s=>s.json()).then(s=>{e.modal.save=!1,r("data berhasil ditambah"),d()}).catch(s=>{r(s,"bg-red-400")})}function k(){m.delete("/user/"+e.req.id).then(s=>s.json()).then(s=>{e.modal.delete=!1,r("data berhasil dihapus"),d()}).catch(s=>{r(s,"bg-red-400")})}return y(()=>{d()}),(s,o)=>(f(),b(U,null,[j,l(u,{class:"mb-4"},{default:n(()=>[t("div",O,[t("button",{onClick:o[0]||(o[0]=a=>{e.isEdit=!1,_(),e.modal.save=!0}),class:"mr-2"}," + Tambah ")])]),_:1}),l(u,{class:"mb-4"},{default:n(()=>[l($,{keys:{Nama:"nama",Username:"username",Role:"role_detail",Opsi:"opsi"},items:e.data.items,class:"mt-3"},{opsi:n(({item:a})=>[t("div",J,[t("button",{onClick:x=>{e.req=JSON.parse(JSON.stringify(a)),e.req.password="",e.isEdit=!0,e.modal.save=!0},class:"material-icons-outlined text-blue-500 !text-xl"}," edit ",8,T),t("button",{onClick:x=>{e.req=JSON.parse(JSON.stringify(a)),e.modal.delete=!0},class:"material-icons-outlined text-red-500 !text-xl"}," delete ",8,B)])]),_:1},8,["items"])]),_:1}),l(h,{modelValue:e.modal.save,"onUpdate:modelValue":o[5]||(o[5]=a=>e.modal.save=a)},{default:n(()=>[l(u,{title:e.isEdit?"Edit User":"Tambah User",class:"w-550px max-w-full"},{default:n(()=>[l(N,{class:"form-field",onSubmit:q,values:e.req,rules:g.value},{default:n(()=>[D,p(t("input",{type:"text",placeholder:"Masukkan Username","onUpdate:modelValue":o[1]||(o[1]=a=>e.req.username=a)},null,512),[[c,e.req.username]]),P,p(t("input",{type:"password",placeholder:"Masukkan Password","onUpdate:modelValue":o[2]||(o[2]=a=>e.req.password=a)},null,512),[[c,e.req.password]]),e.req.id?(f(),b("div",R,"Kosongkan jika tidak ingin mengganti password")):S("",!0),F,p(t("input",{type:"text",placeholder:"Masukkan Nama","onUpdate:modelValue":o[3]||(o[3]=a=>e.req.nama=a)},null,512),[[c,e.req.nama]]),H,p(t("select",{"onUpdate:modelValue":o[4]||(o[4]=a=>e.req.role=a)},G,512),[[C,e.req.role]]),I]),_:1},8,["values","rules"])]),_:1},8,["title"])]),_:1},8,["modelValue"]),l(h,{modelValue:e.modal.delete,"onUpdate:modelValue":o[6]||(o[6]=a=>e.modal.delete=a)},{default:n(()=>[l(u,{title:"Hapus User",class:"max-w-full w-550px"},{default:n(()=>[t("form",{onSubmit:M(k,["prevent"]),class:"form-field"},[t("p",null,[v(" Anda yakin akan menghapus user dengan nama "),t("strong",null,E(e.req.nama),1),v("? ")]),Q],40,L)]),_:1})]),_:1},8,["modelValue"])],64))}};export{Z as default};
