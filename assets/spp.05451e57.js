import{r as b,l as K,z as j,o as y,a as d,f as k,w as o,b as e,d as m,t as n,c as g,F as x,u as N,x as i,_ as v,h,n as $,q as u,E as p,P as E,i as w,v as U,H as L,g as X,p as B,L as D}from"./index.7cbdcbda.js";import{_ as V}from"./AutoComplete.f3c24e8a.js";import{b as T}from"./spp.1ca5aee4.js";import{_ as P}from"./Table.d38c6265.js";import"./Loading.3a98fd87.js";const C={class:"form-field"},I={class:"p-4 bg-gray-50 rounded mb-4"},R={class:"text-right mb-4 text-sm"},J=["href"],M=["href"],O={class:"overflow-x-auto"},A={class:"w-full whitespace-nowrap"},F={class:"text-sm font-semibold"},q=e("td",{class:"text-center uppercase p-3"},"NO",-1),z=e("td",{class:"text-center uppercase p-3"},"NISN",-1),H=e("td",{class:"text-center uppercase p-3"},"Nama Siswa",-1),W={class:"text-center uppercase p-3"},G=e("td",{class:"text-center uppercase p-3"},"Total",-1),Q={class:"border border-gray-100 transition hover:bg-blue-500 hover:text-white"},Y={class:"p-3"},Z={class:"p-3"},aa={class:"p-3"},ta={class:"p-3"},ea={class:"p-3"},la=e("tr",{class:"h-3"},null,-1),sa={key:1,class:"border border-gray-100"},na=e("td",{colspan:"99",class:"p-3 text-center"},"Data tidak tersedia.",-1),ra=[na],oa={__name:"bagan",setup(f){const a=b({filter:{_kelas_jurusan_rombel:""},data:[],kelas_rombel_jurusan:[],excel_url:"",print_url:""});K(()=>{let l={No:"no",Nisn:"nisn",Nama_Siswa:"nama"};return T.forEach(t=>{l[t.slice(0,3)]=t}),l.total="total",l});function c(){h.get("/laporan/spp/bagan",a.filter).then(l=>(a.excel_url=l.headers.get("X-Excel-Url"),a.print_url=l.headers.get("X-Print-Url"),l.json())).then(l=>{a.data=l}).catch(l=>$(l,"bg-red-400"))}function r(){h.get("/kelas-jurusan-rombel").then(l=>l.json()).then(l=>a.kelas_rombel_jurusan=l)}return j(a.filter,()=>{c()}),y(()=>{r()}),(l,t)=>(d(),k(v,{title:"Laporan Bagan"},{default:o(()=>[e("div",C,[m(V,{modelValue:a.filter._kelas_jurusan_rombel,"onUpdate:modelValue":t[0]||(t[0]=s=>a.filter._kelas_jurusan_rombel=s),items:a.kelas_rombel_jurusan.map(s=>({value:s.kelas+"-"+s.jurusan_kode+"-"+s.rombel,text:s.kelas+" "+s.jurusan_kode+" "+s.rombel})),placeholder:"Pilih Kelas"},null,8,["modelValue","items"])]),e("div",I," Kelas: "+n(a.filter._kelas_jurusan_rombel.replace(/-/gi," ")),1),e("div",R,[e("a",{target:"_blank",href:a.excel_url,class:"mr-4 text-green-500"},"EXCEL",8,J),e("a",{target:"_blank",href:a.print_url,class:"text-red-500"},"PRINT",8,M)]),e("div",O,[e("table",A,[e("thead",null,[e("tr",F,[q,z,H,(d(!0),g(x,null,N(i(T),s=>(d(),g("td",W,n(s.slice(0,3)),1))),256)),G])]),e("tbody",null,[a.data.length?(d(!0),g(x,{key:0},N(a.data,(s,_)=>(d(),g(x,null,[e("tr",Q,[e("td",Y,n(_+1),1),e("td",Z,n(s.nisn),1),e("td",aa,n(s.nama),1),(d(!0),g(x,null,N(i(T),S=>(d(),g("td",ta,n(JSON.stringify(s.spp).indexOf(S)>=0?"1":"0"),1))),256)),e("td",ea,n(s.spp.length),1)]),la],64))),256)):(d(),g("tr",sa,ra))])])])]),_:1}))}},_a={class:"form-field"},ua={class:"p-4 bg-gray-50 rounded mb-4"},ia={class:"text-right mb-4 text-sm"},da=["href"],ca=["href"],pa={class:"p-4 bg-gray-50 rounded mb-4"},ga={__name:"kekurangan",setup(f){const a=b({filter:{_kelas_jurusan_rombel:""},data:[],kelas_rombel_jurusan:[],total_kekurangan:0,excel_url:"",print_url:""}),c=K(()=>({No:"no",Nisn:"nisn",Nama_Siswa:"nama",Kekurangan:"kekurangan",Jumlah_kekurangan:"jumlah_kekurangan"}));function r(){h.get("/laporan/spp/kekurangan",a.filter).then(t=>(a.excel_url=t.headers.get("X-Excel-Url"),a.print_url=t.headers.get("X-Print-Url"),t.json())).then(t=>{a.total_kekurangan=0,a.data=t,t.forEach(s=>{a.total_kekurangan+=s.kekurangan*(s.jurusan.jumlah_spp-s.jurusan.jumlah_spp*s.diskon_spp/100)})}).catch(t=>$(t,"bg-red-400"))}function l(){h.get("/kelas-jurusan-rombel").then(t=>t.json()).then(t=>a.kelas_rombel_jurusan=t)}return j(a.filter,()=>{r()}),y(()=>{l()}),(t,s)=>(d(),k(v,{title:"Laporan Kekurangan"},{default:o(()=>[e("div",_a,[m(V,{modelValue:a.filter._kelas_jurusan_rombel,"onUpdate:modelValue":s[0]||(s[0]=_=>a.filter._kelas_jurusan_rombel=_),items:a.kelas_rombel_jurusan.map(_=>({value:_.kelas+"-"+_.jurusan_kode+"-"+_.rombel,text:_.kelas+" "+_.jurusan_kode+" "+_.rombel})),placeholder:"Pilih Kelas"},null,8,["modelValue","items"])]),e("div",ua," Kelas: "+n(a.filter._kelas_jurusan_rombel.replace(/-/gi," ")),1),e("div",ia,[e("a",{target:"_blank",href:a.excel_url,class:"mr-4 text-green-500"},"EXCEL",8,da),e("a",{target:"_blank",href:a.print_url,class:"text-red-500"},"PRINT",8,ca)]),m(P,{keys:c.value,items:a.data},{no:o(({index:_})=>[u(n(_+1),1)]),kekurangan:o(({item:_})=>[u(n(_.kekurangan),1)]),jumlah_kekurangan:o(({item:_})=>[u(n(i(p)(_.kekurangan*(_.jurusan.jumlah_spp-_.jurusan.jumlah_spp*_.diskon_spp/100))),1)]),_:1},8,["keys","items"]),e("div",pa,"Total: "+n(i(p)(a.total_kekurangan)),1)]),_:1}))}},ha={class:"form-field mb-3 grid lg:grid-cols-2 grid-cols-1 gap-3"},ma=e("label",{for:""},"Tanggal Awal",-1),ba=["max"],ka=e("label",{for:""},"Tanggal Akhir",-1),fa={class:"p-4 bg-gray-50 rounded mb-4"},xa={class:"text-right mb-4 text-sm"},ja=["href"],ya=["href"],va={class:"p-4 bg-gray-50 rounded mb-4"},$a={__name:"perbulan",setup(f){const a=b({filter:{_tanggal_awal:"",_tanggal_akhir:""},total:0,data:[],excel_url:"",print_url:""});function c(){a.filter._tanggal_awal&&a.filter._tanggal_akhir&&h.get("/laporan/spp/perbulan",a.filter).then(r=>(a.excel_url=r.headers.get("X-Excel-Url"),a.print_url=r.headers.get("X-Print-Url"),r.json())).then(r=>{a.total=0,a.data=r,r.forEach(l=>{a.total+=l.total_bayar+l.total_tabungan})}).catch(r=>$(r,"bg-red-400"))}return j(a.filter,()=>{c()}),y(()=>{a.filter._tanggal_awal=E(),a.filter._tanggal_akhir=E()}),(r,l)=>(d(),k(v,{title:"Laporan Perbulan"},{default:o(()=>[e("div",ha,[e("div",null,[ma,w(e("input",{type:"date",class:"!mb-0",max:a.filter._tanggal_akhir,"onUpdate:modelValue":l[0]||(l[0]=t=>a.filter._tanggal_awal=t)},null,8,ba),[[U,a.filter._tanggal_awal]])]),e("div",null,[ka,w(e("input",{type:"date",class:"!mb-0","onUpdate:modelValue":l[1]||(l[1]=t=>a.filter._tanggal_akhir=t)},null,512),[[U,a.filter._tanggal_akhir]])])]),e("div",fa," Rentang Waktu: "+n(i(L)(a.filter._tanggal_awal))+" - "+n(i(L)(a.filter._tanggal_akhir)),1),e("div",xa,[e("a",{target:"_blank",href:a.excel_url,class:"mr-4 text-green-500"},"EXCEL",8,ja),e("a",{target:"_blank",href:a.print_url,class:"text-red-500"},"PRINT",8,ya)]),m(P,{keys:{No:"no",Kelas:"kelas",Jumlah_Pembayaran:"jumlah_pembayaran",Jumlah_Total:"total_bayar",Jumlah_Keringanan:"jumlah_keringanan",Uang_Keringanan:"uang_keringanan",Total_SPP_Keringanan:"total_keringanan"},items:a.data},{no:o(({index:t})=>[u(n(t+1),1)]),kelas:o(({item:t})=>[u(n(t.kelas)+" "+n(t.jurusan_kode)+" "+n(t.rombel),1)]),jumlah_pembayaran:o(({item:t})=>[u(n(t.jumlah_pembayaran)+" Transaksi ",1)]),jumlah_keringanan:o(({item:t})=>[u(n(t.keringanan.jumlah)+" Transaksi ",1)]),uang_keringanan:o(({item:t})=>[u(n(i(p)(t.keringanan.uang)),1)]),total_keringanan:o(({item:t})=>[u(n(i(p)(t.keringanan.total)),1)]),total_bayar:o(({item:t})=>[u(n(i(p)(t.total_bayar+t.total_tabungan)),1)]),_:1},8,["items"]),e("div",va,"Total: "+n(i(p)(a.total)),1)]),_:1}))}},wa={class:"form-field"},Pa={class:"p-4 bg-gray-50 rounded mb-4"},Na={class:"text-right mb-4 text-sm"},Ta=["href"],Ea=["href"],Ua={class:"p-4 bg-gray-50 rounded mb-4"},La={__name:"perhari",setup(f){const a=b({filter:{_tanggal:"",_user_id:X.role=="1"?"":X.id},total:0,total_bulan:0,data:[],excel_url:"",print_url:""});function c(){h.get("/laporan/spp/perhari",a.filter).then(r=>(a.excel_url=r.headers.get("X-Excel-Url"),a.print_url=r.headers.get("X-Print-Url"),r.json())).then(r=>{a.total=0,a.data=r,r.forEach(l=>{a.total_bulan+=parseInt(l.total_bulan.replace(" Bulan")),a.total+=l.total_bayar+l.total_tabungan})}).catch(r=>$(r,"bg-red-400"))}return j(a.filter,()=>{c()}),y(()=>{a.filter._tanggal=E()}),(r,l)=>(d(),k(v,{title:"Laporan Perhari"},{default:o(()=>[e("div",wa,[w(e("input",{type:"date","onUpdate:modelValue":l[0]||(l[0]=t=>a.filter._tanggal=t)},null,512),[[U,a.filter._tanggal]])]),e("div",Pa,"Tanggal: "+n(i(L)(a.filter._tanggal)),1),e("div",Na,[e("a",{target:"_blank",href:a.excel_url,class:"mr-4 text-green-500"},"EXCEL",8,Ta),e("a",{target:"_blank",href:a.print_url,class:"text-red-500"},"PRINT",8,Ea)]),m(P,{keys:{No:"no",Nisn:"siswa_nisn",Nama_Siswa:"siswa_nama",Kelas:"siswa_kelas",Bulan:"total_bulan",Total:"total_bayar",Petugas:"operator"},items:a.data},{no:o(({index:t})=>[u(n(t+1),1)]),siswa_nama:o(({item:t})=>[u(n(t.siswa.nama),1)]),siswa_kelas:o(({item:t})=>[u(n(t.siswa.kelas)+" "+n(t.siswa.jurusan_kode)+" "+n(t.siswa.rombel),1)]),total_bayar:o(({item:t})=>[u(n(i(p)(t.total_bayar+t.total_tabungan)),1)]),operator:o(({item:t})=>[u(n(t.operator.nama),1)]),_:1},8,["items"]),e("div",Ua,[e("div",null,"Total Bulan: "+n(a.total_bulan)+" Bulan",1),e("div",null,"Total Pembayaran: "+n(i(p)(a.total)),1)])]),_:1}))}},Va={class:"form-field"},Xa={class:"p-4 bg-gray-50 rounded mb-4"},Ka={class:"text-right mb-4 text-sm"},Sa=["href"],Ba=["href"],Da={class:"p-4 bg-gray-50 rounded mb-4"},Ca={__name:"perkelas",setup(f){const a=b({filter:{_kelas_jurusan_rombel:""},total:0,data:[],kelas_rombel_jurusan:[],excel_url:"",print_url:""});function c(){h.get("/laporan/spp/perkelas",a.filter).then(l=>(a.excel_url=l.headers.get("X-Excel-Url"),a.print_url=l.headers.get("X-Print-Url"),l.json())).then(l=>{a.total=0,a.data=l,l.forEach(t=>{a.total+=t.spp.total_bayar+t.spp.total_tabungan})}).catch(l=>$(l,"bg-red-400"))}function r(){h.get("/kelas-jurusan-rombel").then(l=>l.json()).then(l=>a.kelas_rombel_jurusan=l)}return j(a.filter,()=>{c()}),y(()=>{r()}),(l,t)=>(d(),k(v,{title:"Laporan Perkelas"},{default:o(()=>[e("div",Va,[m(V,{modelValue:a.filter._kelas_jurusan_rombel,"onUpdate:modelValue":t[0]||(t[0]=s=>a.filter._kelas_jurusan_rombel=s),items:a.kelas_rombel_jurusan.map(s=>({value:s.kelas+"-"+s.jurusan_kode+"-"+s.rombel,text:s.kelas+" "+s.jurusan_kode+" "+s.rombel})),placeholder:"Pilih Kelas"},null,8,["modelValue","items"])]),e("div",Xa," Kelas: "+n(a.filter._kelas_jurusan_rombel.replace(/-/gi," ")),1),e("div",Ka,[e("a",{target:"_blank",href:a.excel_url,class:"mr-4 text-green-500"},"EXCEL",8,Sa),e("a",{target:"_blank",href:a.print_url,class:"text-red-500"},"PRINT",8,Ba)]),m(P,{keys:{No:"no",Nisn:"nisn",Nama_Siswa:"nama",Terbayar:"jumlah_pembayaran",Total:"total_bayar"},items:a.data},{no:o(({index:s})=>[u(n(s+1),1)]),jumlah_pembayaran:o(({item:s})=>[u(n(s.spp.jumlah_pembayaran),1)]),total_bayar:o(({item:s})=>[u(n(i(p)(s.spp.total_bayar+s.spp.total_tabungan)),1)]),_:1},8,["items"]),e("div",Da,"Total: "+n(i(p)(a.total)),1)]),_:1}))}},Ia=e("div",{class:"mb-4 pb-2 border-b text-xl"},"Laporan SPP",-1),Ra={class:"flex"},Ja={class:"w-full form-field",lg:"w-1/2"},Ma=e("option",{disabled:"",value:""},"Pilih Laporan SPP",-1),Oa=e("option",{value:"perhari"},"Laporan Perhari",-1),Aa=e("option",{value:"perbulan"},"Laporan Perbulan",-1),Fa=e("option",{value:"bagan"},"Laporan Bagan",-1),qa=[Ma,Oa,Aa,Fa],za=e("div",{class:"pt-3 border-t"},null,-1),Za={__name:"spp",setup(f){const a=b({laporan:"perhari"}),c={perhari:La,perbulan:$a,perkelas:Ca,bagan:oa,kekurangan:ga};return(r,l)=>(d(),g(x,null,[Ia,e("div",Ra,[e("div",Ja,[w(e("select",{"onUpdate:modelValue":l[0]||(l[0]=t=>a.laporan=t)},qa,512),[[B,a.laporan]])])]),za,(d(),k(D(c[a.laporan])))],64))}};export{Za as default};
