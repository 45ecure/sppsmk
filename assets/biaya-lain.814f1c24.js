import{r as w,e as h,o as S,a as m,c as _,d as i,w as n,_ as p,m as k,F as y,b as s,h as c,n as o,q as d,t as r,x as E,k as C,i as f,v,u as x,G as g,s as M,E as N}from"./index.7cbdcbda.js";import{_ as $}from"./Table.d38c6265.js";const U=s("div",{class:"mb-4 pb-2 border-b text-xl"},"Data Biaya Lain",-1),L={class:"form-field"},O={class:"inline-block px-1 bg-white rounded"},D=["onClick"],T=["onClick"],I=s("label",{for:""},"Jenis",-1),X=s("label",{for:""},"Jumlah Bayar",-1),F={class:"grid lg:grid-cols-2 grid-cols-1 gap-3"},H=s("label",{for:""},"Jurusan",-1),K={class:"mb-2"},A=["value"],G=s("label",{for:""},"Kelas",-1),z={class:"mb-2"},P=["value"],Q=s("div",{class:"text-right mt-5"},[s("button",{type:"submit"},"Simpan")],-1),R=["onSubmit"],W=s("div",{class:"mt-5 text-right"},[s("button",{class:"!bg-red-500",type:"submit"},"Hapus")],-1),ea={__name:"biaya-lain",setup(Y){const a=w({isEdit:!1,modal:{save:!1,delete:!1},data:{items:[]},jurusan:[],kelas:["X","XI","XII"],req:{id:"",jenis:"",jumlah_bayar:0,jurusan_data:[],kelas_data:[]}}),q={jenis:h.string().required(),jumlah_bayar:h.number().required(),jurusan_data:h.array().required(),kelas_data:h.array().required()};function j(){a.req={id:"",jenis:"",jumlah_bayar:0,jurusan_data:a.jurusan.map(e=>e.kode),kelas_data:a.kelas}}function b(){j(),c.get("/biaya-lain").then(e=>e.json()).then(e=>{a.data.items=e}).catch(e=>{o(e,"bg-red-400")})}function V(){a.isEdit?c.put("/biaya-lain/"+a.req.id,a.req).then(e=>e.json()).then(e=>{a.modal.save=!1,o("data berhasil diedit"),b()}).catch(e=>{o(e,"bg-red-400")}):c.post("/biaya-lain",a.req).then(e=>e.json()).then(e=>{a.modal.save=!1,o("data berhasil ditambah"),b()}).catch(e=>{o(e,"bg-red-400")})}function J(){c.delete("/biaya-lain/"+a.req.id).then(e=>e.json()).then(e=>{a.modal.delete=!1,o("data berhasil dihapus"),b()}).catch(e=>{o(e,"bg-red-400")})}function B(){c.get("/jurusan").then(e=>e.json()).then(e=>{a.jurusan=e})}return S(()=>{b(),B()}),(e,l)=>(m(),_(y,null,[U,i(p,{class:"mb-4"},{default:n(()=>[s("div",L,[s("button",{onClick:l[0]||(l[0]=t=>{a.isEdit=!1,j(),a.modal.save=!0}),class:"mr-2"}," + Tambah ")])]),_:1}),i(p,{class:"mb-4"},{default:n(()=>[i($,{keys:{Jenis:"jenis",Jumlah_Bayar:"jumlah_bayar",Jurusan:"jurusan_data",Kelas:"kelas_data",Opsi:"opsi"},items:a.data.items},{jurusan_data:n(({item:t})=>[d(r(t.jurusan_data.join(", ")),1)]),tahun:n(({item:t})=>[d(r(t.created_at.slice(0,4)),1)]),kelas_data:n(({item:t})=>[d(r(t.kelas_data.join(", ")),1)]),jumlah_bayar:n(({item:t})=>[d(r(E(N)(t.jumlah_bayar)),1)]),opsi:n(({item:t})=>[s("div",O,[s("button",{onClick:u=>{a.req=JSON.parse(JSON.stringify(t)),a.isEdit=!0,a.modal.save=!0},class:"material-icons-outlined text-blue-500 !text-xl"}," edit ",8,D),s("button",{onClick:u=>{a.req=JSON.parse(JSON.stringify(t)),a.modal.delete=!0},class:"material-icons-outlined text-red-500 !text-xl"}," delete ",8,T)])]),_:1},8,["items"])]),_:1}),i(k,{modelValue:a.modal.save,"onUpdate:modelValue":l[5]||(l[5]=t=>a.modal.save=t)},{default:n(()=>[i(p,{title:a.isEdit?"Edit Biaya Lain":"Tambah Biaya Lain",class:"w-550px max-w-full"},{default:n(()=>[i(C,{class:"form-field",onSubmit:V,values:a.req,rules:q},{default:n(()=>[I,f(s("input",{type:"text",placeholder:"Masukkan Jenis","onUpdate:modelValue":l[1]||(l[1]=t=>a.req.jenis=t)},null,512),[[v,a.req.jenis]]),X,f(s("input",{type:"number",placeholder:"Masukkan Jumlah Bayar","onUpdate:modelValue":l[2]||(l[2]=t=>a.req.jumlah_bayar=t)},null,512),[[v,a.req.jumlah_bayar]]),s("div",F,[s("div",null,[H,(m(!0),_(y,null,x(a.jurusan,t=>(m(),_("div",K,[f(s("input",{type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=u=>a.req.jurusan_data=u),value:t.kode},null,8,A),[[g,a.req.jurusan_data]]),d(" "+r(t.kode),1)]))),256))]),s("div",null,[G,(m(!0),_(y,null,x(a.kelas,t=>(m(),_("div",z,[f(s("input",{type:"checkbox","onUpdate:modelValue":l[4]||(l[4]=u=>a.req.kelas_data=u),value:t},null,8,P),[[g,a.req.kelas_data]]),d(" "+r(t),1)]))),256))])]),Q]),_:1},8,["values"])]),_:1},8,["title"])]),_:1},8,["modelValue"]),i(k,{modelValue:a.modal.delete,"onUpdate:modelValue":l[6]||(l[6]=t=>a.modal.delete=t)},{default:n(()=>[i(p,{title:"Hapus Biaya Lain",class:"max-w-full w-550px"},{default:n(()=>[s("form",{onSubmit:M(J,["prevent"]),class:"form-field"},[s("p",null,[d(" Anda yakin akan menghapus pembayaran untuk "),s("strong",null,r(a.req.jenis),1),d("? ")]),W],40,R)]),_:1})]),_:1},8,["modelValue"])],64))}};export{ea as default};
