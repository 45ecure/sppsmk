import{r as C,g as T,e as f,z as N,o as w,a as c,c as g,d as i,w as n,b as e,i as m,p as v,F as q,u as S,t as d,q as _,x as E,E as J,_ as k,k as K,v as h,O as M,m as x,s as j,h as p,n as r}from"./index.7cbdcbda.js";import{_ as P}from"./Table.d38c6265.js";import{_ as U}from"./Pagination.12989abc.js";const A={class:"mb-4 p-3 rounded bg-gray-100 form-field"},H={class:"form-field"},z=e("option",{value:"5"},"5",-1),B=e("option",{value:"10"},"10",-1),D=e("option",{value:"20"},"20",-1),I=e("option",{value:"50"},"50",-1),F=e("option",{value:"100"},"100",-1),L=[z,B,D,I,F],X=e("option",{value:""},"Semua PTK",-1),G=["value"],Q={class:"bg-white rounded inline-block px-1"},R=["onClick"],W={class:"flex items-center justify-end"},Y=e("label",{for:""},"PTK",-1),Z=e("option",{disabled:"",value:""},"Pilih PTK",-1),tt=["value"],et=e("label",{for:""},"Nominal",-1),at={class:"mt-5 text-right"},st=["onSubmit"],lt=e("p",null,"Anda yakin akan menghapus data terpilih?",-1),ot=e("div",{class:"mt-5 text-right"},[e("button",{class:"!bg-red-500",type:"submit"},"Hapus")],-1),nt=[lt,ot],it={__name:"tabungan-ptk",setup(O){const t=C({isEdit:!1,data:{items:[],ptk:[],totalCount:0},modal:{save:!1,delete:!1},req:{id:"",ptk_id:"",user_id:T.id,nominal:"",status:""},filter:{_limit:5,_page:1,_ptk_id:""}}),y={ptk_id:f.string().required(),status:f.string().required(),user_id:f.string().required(),nominal:f.number().required()};function b(){t.req={id:"",ptk_id:"",user_id:T.id,nominal:"",status:""},t.isEdit=!1}function u(){b(),p.get("/ptk/tabungan",t.filter).then(s=>(t.data.totalCount=parseInt(s.headers.get("X-Total-Count")),s.json())).then(s=>t.data.items=s)}function $(){const s={...t.req};t.req.status=="2"&&(s.nominal=0-t.req.nominal),t.isEdit?p.put("/ptk/tabungan/"+t.req.id,s).then(a=>a.json()).then(a=>{r("data berhasil disimpan"),t.modal.save=!1,u()}).catch(a=>r(a,"bg-red-400")):p.post("/ptk/tabungan",s).then(a=>a.json()).then(a=>{r("data berhasil disimpan"),t.modal.save=!1,u()}).catch(a=>r(a,"bg-red-400"))}function V(){p.delete("/ptk/tabungan/"+t.req.id).then(s=>s.json()).then(s=>{r("data berhasil dihapus"),t.modal.delete=!1,u()}).catch(s=>r(s,"bg-red-400"))}function o(){p.get("/ptk").then(s=>s.json()).then(s=>t.data.ptk=s)}return N(()=>JSON.parse(JSON.stringify(t.filter)),(s,a)=>{s._page==a._page&&(t.filter._page=1),u()}),w(()=>{u(),o()}),(s,a)=>(c(),g(q,null,[i(k,{title:"Tabungan PTK",class:"mb-4"},{default:n(()=>[e("div",A,[e("button",{type:"button",class:"mr-2",onClick:a[0]||(a[0]=l=>{b(),t.req.status="1",t.modal.save=!0})}," + Tambah "),e("button",{type:"button",class:"!bg-red-500",onClick:a[1]||(a[1]=l=>{b(),t.req.status="2",t.modal.save=!0})}," - Ambil ")]),e("div",H,[m(e("select",{"onUpdate:modelValue":a[2]||(a[2]=l=>t.filter._limit=l),class:"!mr-3 !w-20"},L,512),[[v,t.filter._limit]]),m(e("select",{"onUpdate:modelValue":a[3]||(a[3]=l=>t.filter._ptk_id=l),class:"!lg:w-1/2"},[X,(c(!0),g(q,null,S(t.data.ptk,l=>(c(),g("option",{value:l.id},d(l.kode)+" - "+d(l.nama),9,G))),256))],512),[[v,t.filter._ptk_id]])]),i(P,{keys:{No:"no",PTK:"ptk",Id:"status",Nominal:"nominal",Operator:"operator",Opsi:"opsi"},items:t.data.items},{no:n(({index:l})=>[_(d(l+1),1)]),ptk:n(({item:l})=>[_(d(l.ptk.kode)+" - "+d(l.ptk.nama),1)]),status:n(({item:l})=>[_(d(l.nominal>0?"1":"2"),1)]),operator:n(({item:l})=>[_(d(l.user.nama),1)]),nominal:n(({item:l})=>[_(d(E(J)(l.nominal)),1)]),opsi:n(({item:l})=>[e("div",Q,[e("button",{onClick:St=>{t.req=JSON.parse(JSON.stringify(l)),t.modal.delete=!0},class:"material-icons-outlined text-red-500 !text-xl"}," delete ",8,R)])]),_:1},8,["items"]),e("div",W,[i(U,{limit:t.filter._limit,"total-count":t.data.totalCount,modelValue:t.filter._page,"onUpdate:modelValue":a[4]||(a[4]=l=>t.filter._page=l)},null,8,["limit","total-count","modelValue"])])]),_:1}),i(x,{modelValue:t.modal.save,"onUpdate:modelValue":a[7]||(a[7]=l=>t.modal.save=l)},{default:n(()=>[i(k,{title:t.isEdit?"Edit Tabungan PTK":"Tambah Tabungan PTK",class:"!max-w-full !w-550px"},{default:n(()=>[i(K,{values:t.req,rules:y,onSubmit:$,class:"form-field"},{default:n(()=>[Y,m(e("select",{"onUpdate:modelValue":a[5]||(a[5]=l=>t.req.ptk_id=l)},[Z,(c(!0),g(q,null,S(t.data.ptk,l=>(c(),g("option",{value:l.id},d(l.kode)+" - "+d(l.nama),9,tt))),256))],512),[[v,t.req.ptk_id]]),et,m(e("input",{type:"number","onUpdate:modelValue":a[6]||(a[6]=l=>t.req.nominal=l),placeholder:"Masukkan Nominal"},null,512),[[h,t.req.nominal]]),e("div",at,[e("button",{class:M({"!bg-red-500":t.req.status=="2"}),type:"submit"},d(t.req.status=="1"?"Simpan":"Ambil"),3)])]),_:1},8,["values"])]),_:1},8,["title"])]),_:1},8,["modelValue"]),i(x,{modelValue:t.modal.delete,"onUpdate:modelValue":a[8]||(a[8]=l=>t.modal.delete=l)},{default:n(()=>[i(k,{title:"Hapus Tabungan PTK",class:"max-w-full w-550px"},{default:n(()=>[e("form",{onSubmit:j(V,["prevent"]),class:"form-field"},nt,40,st)]),_:1})]),_:1},8,["modelValue"])],64))}},dt=e("div",{class:"mb-4 pb-2 border-b text-xl"},"Data PTK",-1),rt={class:"mb-4 p-3 rounded bg-gray-100 form-field"},ut={class:"form-field"},mt=e("option",{value:"5"},"5",-1),pt=e("option",{value:"10"},"10",-1),_t=e("option",{value:"20"},"20",-1),ft=e("option",{value:"50"},"50",-1),bt=e("option",{value:"100"},"100",-1),ct=[mt,pt,_t,ft,bt],gt={class:"bg-white rounded inline-block px-1"},kt=["onClick"],ht=["onClick"],vt={class:"flex items-center justify-end"},qt=e("label",{for:""},"Kode",-1),xt=e("label",{for:""},"Nama PTK",-1),yt=e("label",{for:""},"Jabatan",-1),$t=e("div",{class:"mt-5 text-right"},[e("button",{type:"submit"},"Simpan")],-1),Vt=["onSubmit"],Tt=e("div",{class:"mt-5 text-right"},[e("button",{class:"!bg-red-500",type:"submit"},"Hapus")],-1),Kt={__name:"ptk",setup(O){const t=C({isEdit:!1,data:{items:[],totalCount:0},modal:{save:!1,delete:!1},req:{id:"",kode:"",nama:"",jabatan:""},filter:{_limit:5,_page:1,q:""}}),y={kode:f.string().required(),nama:f.string().required(),jabatan:f.string().nullable().optional()};function b(){t.req={id:"",kode:"",nama:"",jabatan:""},t.isEdit=!1}function u(){b(),p.get("/ptk",t.filter).then(o=>(t.data.totalCount=parseInt(o.headers.get("X-Total-Count")),o.json())).then(o=>t.data.items=o)}function $(){t.isEdit?p.put("/ptk/"+t.req.id,t.req).then(o=>o.json()).then(o=>{r("data berhasil disimpan"),t.modal.save=!1,u()}).catch(o=>r(o,"bg-red-400")):p.post("/ptk",t.req).then(o=>o.json()).then(o=>{r("data berhasil disimpan"),t.modal.save=!1,u()}).catch(o=>r(o,"bg-red-400"))}function V(){p.delete("/ptk/"+t.req.id).then(o=>o.json()).then(o=>{r("data berhasil dihapus"),t.modal.delete=!1,u()}).catch(o=>r(o,"bg-red-400"))}return N(()=>JSON.parse(JSON.stringify(t.filter)),(o,s)=>{o.page!==s.page&&(t.filter._page=1),u()}),w(()=>{u()}),(o,s)=>(c(),g(q,null,[dt,i(k,{title:"List PTK",class:"mb-4"},{default:n(()=>[e("div",rt,[e("button",{type:"button",onClick:s[0]||(s[0]=a=>{b(),t.modal.save=!0})}," + Tambah ")]),e("div",ut,[m(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>t.filter._limit=a),class:"!mr-3 !w-20"},ct,512),[[v,t.filter._limit]]),m(e("input",{type:"text",placeholder:"Cari","onUpdate:modelValue":s[2]||(s[2]=a=>t.filter.q=a),class:"!lg:w-1/2"},null,512),[[h,t.filter.q,void 0,{lazy:!0}]])]),i(P,{keys:{Kode:"kode",Nama:"nama",Jabatan:"jabatan",Opsi:"opsi"},items:t.data.items},{opsi:n(({item:a})=>[e("div",gt,[e("button",{onClick:l=>{t.req=JSON.parse(JSON.stringify(a)),t.isEdit=!0,t.modal.save=!0},class:"material-icons-outlined text-blue-500 !text-xl"}," edit ",8,kt),e("button",{onClick:l=>{t.req=JSON.parse(JSON.stringify(a)),t.modal.delete=!0},class:"material-icons-outlined text-red-500 !text-xl"}," delete ",8,ht)])]),_:1},8,["items"]),e("div",vt,[i(U,{limit:t.filter._limit,"total-count":t.data.totalCount,modelValue:t.filter._page,"onUpdate:modelValue":s[3]||(s[3]=a=>t.filter._page=a)},null,8,["limit","total-count","modelValue"])])]),_:1}),i(it),i(x,{modelValue:t.modal.save,"onUpdate:modelValue":s[7]||(s[7]=a=>t.modal.save=a)},{default:n(()=>[i(k,{title:t.isEdit?"Edit PTK":"Tambah PTK",class:"!max-w-full !w-550px"},{default:n(()=>[i(K,{values:t.req,rules:y,onSubmit:$,class:"form-field"},{default:n(()=>[qt,m(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=a=>t.req.kode=a),placeholder:"Masukkan Kode"},null,512),[[h,t.req.kode]]),xt,m(e("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=a=>t.req.nama=a),placeholder:"Masukkan Nama PTK"},null,512),[[h,t.req.nama]]),yt,m(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=a=>t.req.jabatan=a),placeholder:"Masukkan Jabatan"},null,512),[[h,t.req.jabatan]]),$t]),_:1},8,["values"])]),_:1},8,["title"])]),_:1},8,["modelValue"]),i(x,{modelValue:t.modal.delete,"onUpdate:modelValue":s[8]||(s[8]=a=>t.modal.delete=a)},{default:n(()=>[i(k,{title:"Hapus PTK",class:"max-w-full w-550px"},{default:n(()=>[e("form",{onSubmit:j(V,["prevent"]),class:"form-field"},[e("p",null,[_(" Anda yakin akan menghapus ptk dengan kode "),e("strong",null,d(t.req.kode),1),_("? ")]),Tt],40,Vt)]),_:1})]),_:1},8,["modelValue"])],64))}};export{Kt as default};
