import{r as m,g as N,z as f,o as x,P as E,a as b,f as p,w as r,b as t,i as k,v as M,t as n,x as i,H as L,d as c,q as _,E as u,_ as v,h,n as j,c as $,F as y,u as U,p as T,L as V}from"./index.7cbdcbda.js";import{_ as w}from"./Table.d38c6265.js";import{_ as X}from"./AutoComplete.f3c24e8a.js";const D={class:"form-field"},S={class:"p-4 bg-gray-50 rounded mb-4"},B={class:"text-right mb-4 text-sm"},J=["href"],C=["href"],I={class:"p-4 bg-gray-50 rounded mb-4"},K={__name:"perhari",setup(g){const a=m({filter:{_tanggal:"",_user_id:N.id},total:0,data:[],excel_url:"",print_url:""});function d(){h.get("/laporan/tabungan/perhari",a.filter).then(o=>(a.excel_url=o.headers.get("X-Excel-Url"),a.print_url=o.headers.get("X-Print-Url"),o.json())).then(o=>{a.total=0,a.data=o,o.forEach(e=>{a.total+=e.jumlah_bayar})}).catch(o=>j(o,"bg-red-400"))}return f(a.filter,()=>{d()}),x(()=>{a.filter._tanggal=E()}),(o,e)=>(b(),p(v,{title:"Laporan Perhari"},{default:r(()=>[t("div",D,[k(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=l=>a.filter._tanggal=l)},null,512),[[M,a.filter._tanggal]])]),t("div",S,"Tanggal: "+n(i(L)(a.filter._tanggal)),1),t("div",B,[t("a",{target:"_blank",href:a.excel_url,class:"mr-4 text-green-500"},"EXCEL",8,J),t("a",{target:"_blank",href:a.print_url,class:"text-red-500"},"PRINT",8,C)]),c(w,{keys:{No:"no",Nisn:"siswa_nisn",Nama_Siswa:"siswa_nama",Kelas:"siswa_kelas",Id:"id",Jenis_Tabungan:"status_tabungan_detail",Nominal:"jumlah_bayar",Operator:"operator"},items:a.data},{no:r(({index:l})=>[_(n(l+1),1)]),siswa_nama:r(({item:l})=>[_(n(l.siswa.nama),1)]),siswa_kelas:r(({item:l})=>[_(n(l.siswa.kelas)+" "+n(l.siswa.jurusan_kode)+" "+n(l.siswa.rombel),1)]),id:r(({item:l})=>[_(n(l.jumlah_bayar>0?"1":"2"),1)]),jumlah_bayar:r(({item:l})=>[_(n(i(u)(l.jumlah_bayar)),1)]),operator:r(({item:l})=>[_(n(l.user.nama),1)]),_:1},8,["items"]),t("div",I,"Total: "+n(i(u)(a.total)),1)]),_:1}))}},F={class:"form-field mb-3"},R=t("option",{value:""},"Pilih Bulan",-1),A=["value"],O={class:"p-4 bg-gray-50 rounded mb-4"},q={class:"text-right mb-4 text-sm"},z=["href"],H=["href"],W={class:"p-4 bg-gray-50 rounded mb-4"},G=t("td",null,"Total Menabung",-1),Q=t("td",{class:"px-3"},":",-1),Y=t("td",null,"Total Mengambil",-1),Z=t("td",{class:"px-3"},":",-1),aa=t("td",null,"Total Semua",-1),ta=t("td",{class:"px-3"},":",-1),ea={__name:"perbulan",setup(g){const a=m({filter:{_bulan:""},total:{total:0,tambah:0,ambil:0},data:[],excel_url:"",print_url:""}),d=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];function o(){h.get("/laporan/tabungan/perbulan",a.filter).then(e=>(a.excel_url=e.headers.get("X-Excel-Url"),a.print_url=e.headers.get("X-Print-Url"),e.json())).then(e=>{a.total={total:0,tambah:0,ambil:0},a.data=e,e.forEach(l=>{a.total.total+=l.total_tambah+l.total_ambil,a.total.tambah+=l.total_tambah,a.total.ambil+=l.total_ambil})}).catch(e=>j(e,"bg-red-400"))}return f(a.filter,()=>{o()}),x(()=>{const e=new Date;a.filter._bulan=e.getMonth()+1}),(e,l)=>(b(),p(v,{title:"Laporan Perbulan"},{default:r(()=>[t("div",F,[k(t("select",{"onUpdate:modelValue":l[0]||(l[0]=s=>a.filter._bulan=s)},[R,(b(),$(y,null,U(d,(s,P)=>t("option",{value:P+1},n(s),9,A)),64))],512),[[T,a.filter._bulan]])]),t("div",O,"Bulan: "+n(d[a.filter._bulan-1]),1),t("div",q,[t("a",{target:"_blank",href:a.excel_url,class:"mr-4 text-green-500"},"EXCEL",8,z),t("a",{target:"_blank",href:a.print_url,class:"text-red-500"},"PRINT",8,H)]),c(w,{keys:{No:"no",Kelas:"kelas",Jumlah_Menabung:"jumlah_tambah",Saldo_Menabung:"total_tambah",Jumlah_Mengambil:"jumlah_ambil",Saldo_Mengambil:"total_ambil"},items:a.data},{no:r(({index:s})=>[_(n(s+1),1)]),kelas:r(({item:s})=>[_(n(s.siswa_kelas)+" "+n(s.siswa_jurusan_kode)+" "+n(s.siswa_rombel),1)]),total_tambah:r(({item:s})=>[_(n(i(u)(s.total_tambah)),1)]),total_ambil:r(({item:s})=>[_(n(i(u)(s.total_ambil)),1)]),_:1},8,["items"]),t("div",W,[t("table",null,[t("tr",null,[G,Q,t("td",null,n(i(u)(a.total.tambah)),1)]),t("tr",null,[Y,Z,t("td",null,n(i(u)(a.total.ambil)),1)]),t("tr",null,[aa,ta,t("td",null,n(i(u)(a.total.total)),1)])])])]),_:1}))}},la={class:"form-field"},sa={class:"p-4 bg-gray-50 rounded mb-4"},na={class:"text-right mb-4 text-sm"},ra=["href"],oa=["href"],_a={class:"p-4 bg-gray-50 rounded mb-4"},ia={__name:"perkelas",setup(g){const a=m({filter:{_kelas_jurusan_rombel:""},total:0,data:[],kelas_rombel_jurusan:[],excel_url:"",print_url:""});function d(){h.get("/laporan/tabungan/perkelas",a.filter).then(e=>(a.excel_url=e.headers.get("X-Excel-Url"),a.print_url=e.headers.get("X-Print-Url"),e.json())).then(e=>{a.total=0,a.data=e,e.forEach(l=>{a.total+=l.tabungan_pribadi+l.tabungan_wajib})}).catch(e=>j(e,"bg-red-400"))}function o(){h.get("/kelas-jurusan-rombel").then(e=>e.json()).then(e=>a.kelas_rombel_jurusan=e)}return f(a.filter,()=>{d()}),x(()=>{o()}),(e,l)=>(b(),p(v,{title:"Laporan Perkelas"},{default:r(()=>[t("div",la,[c(X,{modelValue:a.filter._kelas_jurusan_rombel,"onUpdate:modelValue":l[0]||(l[0]=s=>a.filter._kelas_jurusan_rombel=s),items:a.kelas_rombel_jurusan.map(s=>({value:s.kelas+"-"+s.jurusan_kode+"-"+s.rombel,text:s.kelas+" "+s.jurusan_kode+" "+s.rombel})),placeholder:"Pilih Kelas"},null,8,["modelValue","items"])]),t("div",sa," Kelas: "+n(a.filter._kelas_jurusan_rombel.replace(/-/gi," ")),1),t("div",na,[t("a",{target:"_blank",href:a.excel_url,class:"mr-4 text-green-500"},"EXCEL",8,ra),t("a",{target:"_blank",href:a.print_url,class:"text-red-500"},"PRINT",8,oa)]),c(w,{keys:{No:"no",Nisn:"nisn",Nama_Siswa:"nama",Tabungan_Wajib:"tabungan_wajib",Tabungan_Pribadi:"tabungan_pribadi",Total:"total"},items:a.data},{no:r(({index:s})=>[_(n(s+1),1)]),tabungan_wajib:r(({item:s})=>[_(n(i(u)(s.tabungan_wajib)),1)]),tabungan_pribadi:r(({item:s})=>[_(n(i(u)(s.tabungan_pribadi)),1)]),total:r(({item:s})=>[_(n(i(u)(s.tabungan_pribadi+s.tabungan_wajib)),1)]),_:1},8,["items"]),t("div",_a,"Total: "+n(i(u)(a.total)),1)]),_:1}))}},ua=t("div",{class:"mb-4 pb-2 border-b text-xl"},"Laporan Tabungan",-1),da={class:"flex"},ba={class:"w-full form-field",lg:"w-1/2"},ca=t("option",{disabled:"",value:""},"Pilih Laporan Tabungan",-1),ha=t("option",{value:"perhari"},"Laporan Perhari",-1),ma=t("option",{value:"perkelas"},"Laporan Perkelas",-1),pa=[ca,ha,ma],ga=t("div",{class:"pt-3 border-t"},null,-1),va={__name:"tabungan",setup(g){const a=m({laporan:"perhari"}),d={perhari:K,perbulan:ea,perkelas:ia};return(o,e)=>(b(),$(y,null,[ua,t("div",da,[t("div",ba,[k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.laporan=l)},pa,512),[[T,a.laporan]])])]),ga,(b(),p(V(d[a.laporan])))],64))}};export{va as default};
